Build exactly to this spec (Humans Square â€” World Mini App)
Use the attached PDF â€œProject: Humans Square â€” a World Mini Appâ€ as the single source of truth. Build a minimal, fast, Worldâ€‘native MVP that opens inside World App via MiniKit.
0) Scaffold & dependencies
Create a Next.js 15 (App Router) + TypeScript project using Worldâ€™s miniâ€‘app template.
Install @worldcoin/minikit-js and @worldcoin/minikit-react and wrap the app in MiniKitProvider.
Add .env.example with:
NEXT_PUBLIC_MINIKIT_APP_ID= (placeholder)
NEXT_PUBLIC_APP_URL= (http URL Replit will host)
REALTIME_URL= (WS/SSE endpoint you create)
Add a README: local dev, env vars, how to open inside World App (so MiniKit.isInstalled() returns true).
1) Information architecture (routes)
/ Landing
Hero â€œHumans Square.â€
Button: Enter Global Square
Readâ€‘only preview: latest 10 messages from Global (works preâ€‘verify).
Attempting to post/like opens World ID verify gate.
/room/global Global Square
Header shows Todayâ€™s topic (server string; default â€œWhat are you building today?â€).
Live chronological feed with new messages appended in real time.
Message cells: pseudonymous handle, timestamp, â­ count.
Composer (240 char soft limit, counter). Disabled until verified.
Actions per message: â­ upvote (1 per human), Report, Mute (local hide).
Presence chip: â€œN humans onlineâ€ (rounded).
/room/work Work Mode (toggle from Global)
Separate feed for short Help Wanted / Advice / Collab posts.
Fields: Category, Link (optional), Location (Global/Country/City).
Link rateâ€‘limit: â‰¤ 2 per 10 min and â‰¤ 4 per hour per human.
Oneâ€‘tap back to Global.
/capsule Capsule onboarding (3 skippable steps)
â€œYouâ€™re entering a realâ€‘human space.â€
â€œBe kind. No spam. No NSFW. No scams.â€
â€œPost as a human: verify once with World ID.â€
Ends on Verify & Continue (runs MiniKit flow). Persist a â€œseenâ€ flag.
Profile lightbox (modal)
Firstâ€‘seen date, total posts, stars received.
Request Connect button (just records consent + stub; no DMs in MVP).
2) Data model (no PII; use hashed nullifier)
Use nullifier hash (or salted hash) from World ID as human_id. Minimal DAL so we can swap storage later.
Human: human_id, joined_at, capsule_seen, mute_list[]
Message: message_id, room(global|work), author_human_id, text, created_at, stars_count, reports_count, (workâ€‘only: category, link, geo_scope)
Star: message_id, human_id, created_at
RateLimit: rolling counters per human_id per room/action
Theme: date, topic_text
Storage: Start with Replit KV/SQLite. Keep a thin DataAccess layer.
3) Realtime
Live updates over WebSocket or SSE (your choice).
Fallback to polling (e.g., 2s) if the socket drops so demo never stalls.
4) World ID + MiniKit (mustâ€‘have)
Gate post / star / report / connect behind MiniKit World ID verification.
Detect World App using MiniKit.isInstalled() and show Open in World App hint otherwise.
Never store wallet or PII; only the hashed nullifier.
5) Wallet rail (stub only; no real transfers)
Implement a PayoutsService interface + points (not tokens) demo called â€œRoom Rainâ€ that splits a small points pool among recently active, upvoted humans; show a transparent /ledger list of â€œpoint rains.â€
Add README note: â€œReal ERCâ€‘20 transfers would later use Permit2 and sponsored gas; not included in MVP.â€
6) Safety, moderation, and limits
Content filter: simple badâ€‘word list clientâ€‘side + server sanity checks (length, URL whitelist).
Report flow: threshold hides from default view; keep a simple admin flag.
Mute list per user (local hide).
Rate limits (tunable constants) per verified human:
Messages: 5/min, 60/hr, 200/day
Stars: 1 per message (also cap ~20/min)
Workâ€‘mode links: â‰¤2/10min, â‰¤4/hr
Friendly cooldown toasts; grey out composer during cooldown.
7) Copy & empty states (use exactly)
Landing: â€œA global square for verified humans.â€
Sub: â€œTalk. Learn. Build. One human, one voice.â€
Composer placeholder: â€œSay something useful, kind, or curiousâ€¦â€
Verify gate: â€œPosting is humanâ€‘only. Verify once with World ID.â€
Empty Global: â€œBe the first to say hi today ğŸ‘‹â€
Empty Work: â€œNo requests yet. Ask for help or offer your skills.â€
Report confirm: â€œThanks. Weâ€™ll review and keep this space healthy.â€
Cooldown: â€œYouâ€™re sending messages fast. Take a breathâ€”back in {N} sec.â€
8) Design requirements
Follow World Design Guidelines defaults: 24px spacing grid, safeâ€‘area padding, skeleton loaders, large tap targets, readable contrast; keep it light and fast.
No custom fonts needed.
9) Telemetry & health
Simple counters (console or tiny endpoint): verify_success, message_sent, star_given, report_submitted.
/health endpoint for uptime.
10) Definition of Done (acceptance checks)
Opens inside World App; MiniKit.isInstalled() is true.
Landing shows readâ€‘only preview (no verify needed).
Verify â†’ post â†’ live update works E2E.
â­ upvote works; canâ€™t doubleâ€‘star same message.
Rate limits & link limits enforced with friendly cooldowns.
Report & Mute work.
Work Mode shows categorized posts.
Handles poor network (skeletons + retry).
Stores only hashed nullifier; no PII.
UI spacing/states consistent with World guidelines.
README explains local run + â€œopen in World Appâ€ steps.
11) Nonâ€‘goals / constraints for MVP
No DMs, no notifications beyond functional, no NSFW or adult services, no onâ€‘chain payouts, no KYC.
Please implement the above endâ€‘toâ€‘end, keep code clean and commented, and produce a short screencap/GIF in the README showing: open â†’ verify â†’ post â†’ star â†’ report â†’ Work Mode post with link â†’ cooldown trigger.
â€œFollow the written spec; do not add features outside scope.â€
